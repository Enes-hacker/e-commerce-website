<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="style.css">
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"
        integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" crossorigin="anonymous">
        </script>
    <!-- Add these two scripts for Bootstrap dropdown functionality -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
        integrity="sha384-Qo1tgWetKTfozv71NE45LfoBpKlRi0NXib0eY2z3tlpFaUg5rHc6/AJ9oCPEylBn" crossorigin="anonymous">
        </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        crossorigin="anonymous"></script>
    <title>Document</title>
    <style>
        .product-item {
            color: black;
        }

        .product-price {
            font-weight: bold;
        }

        .product-rating {
            color: #f1c40f;
            /* Set the color for the rating */
        }

        .product-rating::before {
            content: "\2605";
            /* Unicode character for a star */
            display: inline-block;
        }

        .product-row {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
        }

        .product-item {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: center;
            width: 200px;
        }

        .product-item img {
            display: block;
            margin: 0 auto;
        }

        .product-item h4 {
            margin: 10px 0;
        }

        .remove-btn {
            background-color: #f44336;
            color: white;
            border: none;
            padding: 8px 12px;
            cursor: pointer;
            font-size: 14px;
            margin-top: 8px;
            width: 100%;
        }

        .remove-btn:hover {
            background-color: #d32f2f;
        }
    </style>

</head>

<body>
    <!--HEADER-->
    <div class="container-fluid nv bg-primary">
        <nav class="navbar navbar-expand-lg bg-body-tertiary offset-lg-1">
            <div class="container-fluid ">
                <a class="navbar-brand" href="#">
                    <img src="images/global-commerce.png" class="logo">
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                    data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false"
                    aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNavDropdown">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item">
                            <a class="nav-link" aria-current="page" href="index.html">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">About</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">Pricing</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="mychart.html">My Chart</a>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                                aria-expanded="false">
                                Categories
                            </a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="bags.html">Bags</a></li>
                                <li><a class="dropdown-item" href="shoes.html">Shoes</a></li>
                                <li><a class="dropdown-item" href="tshirts.html">T-shirts</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </div>
    <!--HEADER END-->
    <div class="col-6 mt-3">
        <canvas id="myChart"></canvas>
    </div>
    <div class="col-6 mt-3">
        <h3>My Chart</h3>
        <ul id="chartList"></ul>
    </div>
    <div id="chartProducts">
        <!-- The selected products will be rendered here -->
    </div>
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"
        integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" crossorigin="anonymous">
        </script>

    <script>
       /* const PRODUCTS = [
            { name: 'A Nike Shoe', description: 'lorem ipsum dolor sit amet', price: 40, size: 35, color: 'black', image: '/shoes/shoe1.jpg', rating: 4.8 },
            { name: 'B Nike Shoe', description: 'lorem ipsum dolor sit amet', price: 50, size: 36, color: 'red', image: '/shoes/shoe2.jpg', rating: 4.8 },
            { name: 'C Nike Shoe', description: 'lorem ipsum dolor sit amet', price: 55, size: 37, color: 'blue', image: '/shoes/shoe3.jpg', rating: 3.8 },
            { name: 'Z Nike Shoe', description: 'lorem ipsum dolor sit amet', price: 60, size: 38, color: 'white', image: '/shoes/shoe4.png', rating: 4.1 },
            { name: 'A Nike Shoe', description: 'lorem ipsum dolor sit amet', price: 65, size: 39, color: 'black', image: '/shoes/shoe1.jpg', rating: 4.4 },
            { name: 'B Nike Shoe', description: 'lorem ipsum dolor sit amet', price: 70, size: 39, color: 'red', image: '/shoes/shoe2.jpg', rating: 4.9 },
            { name: 'C Nike Shoe', description: 'lorem ipsum dolor sit amet', price: 35, size: 40, color: 'blue', image: '/shoes/shoe3.jpg', rating: 2.8 },
            { name: 'Z Nike Shoe', description: 'lorem ipsum dolor sit amet', price: 35, size: 41, color: 'white', image: '/shoes/shoe4.png', rating: 3.8 },
            { name: 'A Nike Shoe', description: 'lorem ipsum dolor sit amet', price: 40, size: 42, color: 'black', image: '/shoes/shoe1.jpg', rating: 3.9 },
            { name: 'B Nike Shoe', description: 'lorem ipsum dolor sit amet', price: 40, size: 43, color: 'red', image: '/shoes/shoe2.jpg', rating: 5 },
            { name: 'C Nike Shoe', description: 'lorem ipsum dolor sit amet', price: 40, size: 36, color: 'blue', image: '/shoes/shoe3.jpg', rating: 4 },
            { name: 'Z Nike Shoe', description: 'lorem ipsum dolor sit amet', price: 45, size: 43, color: 'white', image: '/shoes/shoe4.png', rating: 5 },
            { name: 'A Nike Shoe', description: 'lorem ipsum dolor sit amet', price: 50, size: 42, color: 'black', image: '/shoes/shoe1.jpg', rating: 5 },
            { name: 'B Nike Shoe', description: 'lorem ipsum dolor sit amet', price: 50, size: 37, color: 'red', image: '/shoes/shoe2.jpg', rating: 5 },
            { name: 'C Nike Shoe', description: 'lorem ipsum dolor sit amet', price: 60, size: 38, color: 'blue', image: '/shoes/shoe3.jpg', rating: 4 },
            { name: 'Z Nike Shoe', description: 'lorem ipsum dolor sit amet', price: 60, size: 40, color: 'white', image: '/shoes/shoe4.png', rating: 3 },
            { name: 'A Nike Shoe', description: 'lorem ipsum dolor sit amet', price: 55, size: 40, color: 'black', image: '/shoes/shoe1.jpg', rating: 3.8 },
            { name: 'B Nike Shoe', description: 'lorem ipsum dolor sit amet', price: 65, size: 41, color: 'red', image: '/shoes/shoe2.jpg', rating: 3.8 },
            { name: 'C Nike Shoe', description: 'lorem ipsum dolor sit amet', price: 100, size: 37, color: 'blue', image: '/shoes/shoe3.jpg', rating: 3.8 },
            { name: 'Z Nike Shoe', description: 'lorem ipsum dolor sit amet', price: 120, size: 42, color: 'white', image: '/shoes/shoe4.png', rating: 3.8 },
            { name: 'A Nike Shoe', description: 'lorem ipsum dolor sit amet', price: 40, size: 35, color: 'black', image: '/shoes/shoe1.jpg', rating: 4.5 },
            { name: 'B Nike Shoe', description: 'lorem ipsum dolor sit amet', price: 50, size: 36, color: 'red', image: '/shoes/shoe2.jpg', rating: 3.8 },

            { name: 'A Nike T-shirt', description: 'lorem ipsum dolor sit amet', price: 15, size: 'M', color: 'orange&blue', image: '/t-shirts/t1.png', rating: 4.0 },
            { name: 'B Nike T-shirt', description: 'lorem ipsum dolor sit amet', price: 10, size: 'L', color: 'white', image: '/t-shirts/t2.jpg', rating: 3.9  },
            { name: 'C Nike T-shirt', description: 'lorem ipsum dolor sit amet', price: 15, size: 'M', color: 'black', image: '/t-shirts/t3.jpg', rating: 3.5 },
            { name: 'D Nike T-shirt', description: 'lorem ipsum dolor sit amet',  price: 30, size: 'XS', color: 'orange&blue', image: '/t-shirts/t4.png', rating: 4.9  },
            { name: 'A Nike T-shirt', description: 'lorem ipsum dolor sit amet', price: 15, size: 'M', color: 'orange&blue', image: '/t-shirts/t1.png', rating: 4.8 },
            { name: 'B Nike T-shirt', description: 'lorem ipsum dolor sit amet', price: 10, size: 'L', color: 'white', image: '/t-shirts/t2.jpg', rating: 2.8  },
            { name: 'C Nike T-shirt', description: 'lorem ipsum dolor sit amet', price: 15, size: 'M', color: 'black', image: '/t-shirts/t3.jpg', rating: 4.8 },
            { name: 'D Nike T-shirt', description: 'lorem ipsum dolor sit amet', price: 30, size: 'XS', color: 'orange&blue', image: '/t-shirts/t4.png', rating: 3.8  },
            { name: 'A Nike T-shirt', description: 'lorem ipsum dolor sit amet', price: 15, size: 'M', color: 'orange&blue', image: '/t-shirts/t1.png', rating: 3.8 },
            { name: 'B Nike T-shirt', description: 'lorem ipsum dolor sit amet', price: 10, size: 'XL', color: 'white', image: '/t-shirts/t2.jpg', rating: 5.0  },
            { name: 'C Nike T-shirt', description: 'lorem ipsum dolor sit amet', price: 15, size: 'M', color: 'black', image: '/t-shirts/t3.jpg', rating: 5 },
            { name: 'D Nike T-shirt', description: 'lorem ipsum dolor sit amet', price: 30, size: 'S', color: 'orange&blue', image: '/t-shirts/t4.png', rating: 3.1  },
            { name: 'A Nike T-shirt', description: 'lorem ipsum dolor sit amet', price: 15, size: 'M', color: 'orange&blue', image: '/t-shirts/t1.png', rating: 3.2 },
            { name: 'B Nike T-shirt', description: 'lorem ipsum dolor sit amet', price: 10, size: 'XL', color: 'white', image: '/t-shirts/t2.jpg', rating: 4.4  },
            { name: 'C Nike T-shirt', description: 'lorem ipsum dolor sit amet', price: 15, size: 'M', color: 'black', image: '/t-shirts/t3.jpg',  rating: 4.5 },
            { name: 'D Nike T-shirt', description: 'lorem ipsum dolor sit amet', price: 30, size: 'S', color: 'orange&blue', image: '/t-shirts/t4.png', rating: 3.8},
        ];*/
        let chartData = [];
        let chartLabels = [];
        let selectedProducts = [];
        let myChart;

        function renderChartProducts(products) {
            let html = '<div class="product-row">';
            for (const product of products) {
                html += `
            <div class="product-item border">
                <img src="${product.image}" alt="${product.name}" style="height: 200px;">
                <h4>${product.name}</h4>
                <p style="color: black">${product.description}</p>
                <p class="product-price" style="color: black">Price: ${product.price} €</p>
                <p class="product-rating">Rating: ${product.rating} / 5</p>
                <button class="remove-btn" onclick="removeFromChart('${product.name}')">Remove</button>
            </div>
        `;
            }
            html += '</div>';
            document.getElementById('chartProducts').innerHTML = html;
        }


        function getSelectedProductsFromStorage() {
            return JSON.parse(localStorage.getItem('selectedProducts') || '[]');
        }

        function updateChart() {
            if (myChart) {
                myChart.destroy();
            }

            chartData = selectedProducts.map(product => product.price);
            chartLabels = selectedProducts.map(product => product.name);

            const ctx = document.getElementById('myChart').getContext('2d');
            myChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: chartLabels,
                    datasets: [{
                        label: 'Price (€)',
                        data: chartData,
                        backgroundColor: 'rgba(54, 162, 235, 0.5)',
                        borderColor: 'rgba(54, 162, 235, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        function addToChart(index) {
            const product = PRODUCTS[index];
            selectedProducts.push(product);
            updateChart();
            updateChartList();
            renderChartProducts(selectedProducts);

            // Save the selected products to localStorage
            localStorage.setItem('selectedProducts', JSON.stringify(selectedProducts));

          
        }


        function updateChartList() {
            const chartList = document.getElementById('chartList');
            chartList.innerHTML = '';
            for (const product of selectedProducts) {
                const listItem = document.createElement('li');
                listItem.innerText = `${product.name} - Price: ${product.price} €`;
                chartList.appendChild(listItem);
            }
        }

        // When the page loads, fetch and render the selected products
        document.addEventListener('DOMContentLoaded', function () {
            selectedProducts = getSelectedProductsFromStorage();
            renderChartProducts(selectedProducts);
            updateChart();
            updateChartList();
        });

        function removeFromChart(productName) {
            selectedProducts = selectedProducts.filter(product => product.name !== productName);
            renderChartProducts(selectedProducts);
            updateChartList();

            // Save the updated selected products to localStorage
            localStorage.setItem('selectedProducts', JSON.stringify(selectedProducts));
        }

    </script>

</body>

</html>